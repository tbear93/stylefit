# 📊 정밀 데이터 추출 알고리즘 기반 체형 분석 개요

> 목적: **사진 촬영 환경의 왜곡을 제거하고**,  
> **비율 기반 수치 데이터로 남성 체형을 정확히 판정**하는 알고리즘 설계

---

# 1️⃣ 사진 결과물을 망치는 3가지 기준

사진 기반 체형 분석에서 가장 큰 오차 요인은 다음 3가지입니다.

## 1. 조명 (Light)
- 그림자 및 빛 번짐 발생
- 관절 인식 오류 및 좌표 Jittering
- 피부·의류 경계 인식 실패

## 2. 각도 (Angle)
- 카메라 기울어짐으로 인한 왜곡
- 다리 길이, 어깨 너비 비정상 측정
- 원근 왜곡 발생

## 3. 거리 (Distance)
- 카메라와의 거리 차이로 인한 크기 왜곡
- 픽셀 기반 측정값의 비일관성
- 실제 신체 비율과 차이 발생

---

# 🎯 왜곡 방지 핵심 보정 전략

| 항목 | 해결 전략 |
|------|------------|
| 조명 | 밝기 표준화 + 화이트 밸런스 보정 |
| 각도 | 수평 센서 + 정면 포즈 강제 |
| 거리 | 기준물체 활용 + 거리 고정 가이드 |

---

# 🧠 5대 체형 정의 (분류 기준)

남성 체형은 어깨 / 허리 / 골반의 **비율 차이**로 분류합니다.

## 1. 역삼각형 (V-Shape)
- 어깨 > 허리
- 운동선수형 체형

## 2. 사각형 (Rectangle)
- 어깨 ≒ 허리 ≒ 골반
- 일자형 체형

## 3. 삼각형 (Triangle)
- 허리·골반 > 어깨
- 하체 발달형

## 4. 타원형 (Oval)
- 전체적으로 둥근 형태
- 복부 중심 볼륨형

## 5. 모래시계형 (Hourglass)
- 어깨 ≒ 골반 > 허리
- 균형 잡힌 체형

---

# 📐 수치 기반 판정 로직

> 절대값이 아닌 **비율 기반 계산**

## 1️⃣ 측정 데이터
- Shoulder Width (S)
- Waist Width (W)
- Hip Width (H)
- Height (T)

## 2️⃣ 주요 비율 계산
Shoulder Ratio = S / W
Hip Ratio = H / W
Balance Index = S / H


## 3️⃣ 체형 판정 예시 로직

| 조건 | 체형 |
|------|------|
| S/W ≥ 1.2 | 역삼각형 |
| S ≒ W ≒ H | 사각형 |
| H/W ≥ 1.1 & S < H | 삼각형 |
| W가 전체 대비 높음 | 타원형 |
| S ≒ H & W가 상대적으로 작음 | 모래시계 |

---

# 🧩 MediaPipe 기반 정밀 신체 추출 알고리즘

## 1️⃣ 조명 보정 (Light Optimization)

### 문제
- 명암 차이 기반 관절 탐지 오류
- 좌표 튐 현상 (Jittering)

### 해결

- **Histogram Equalization**
  - 밝기 정규화
- **화이트 밸런스 보정**
  - 색온도 교정
- **실시간 조도 체크**
  - “화면이 어둡습니다”
  - “역광입니다” 알림

---

## 2️⃣ 각도 보정 (Angle Correction)

### 문제
- 카메라 기울기 → 신체 왜곡
- Z축 깊이 차이 발생

### 해결

- 📱 Gyroscope 활용
  - 90도 수직 상태에서만 촬영 버튼 활성화
- 📊 좌우 어깨 Z좌표 비교
  - 차이 발생 시 정면 유도
- 🧍 Overlay 가이드 실루엣 제공
  - 정면 정렬 유도

---

## 3️⃣ 거리 보정 (Distance Normalization)

### 문제
- 픽셀 크기 ≠ 실제 크기
- 원근법 왜곡

### 해결

### ① 기준 물체 활용
- 신용카드 / A4 용지
- 픽셀 → cm 변환 공식 생성


### ② 카메라 화각 기반 거리 추정
- 스마트폰 FOV 활용
- 키 픽셀 높이 역산 → 실제 거리 계산

### ③ 촬영 거리 고정 가이드
- 화면 가이드라인에 발/머리 정렬
- 모든 사용자 동일 촬영 거리 확보

---

# 👔 5대 체형별 코디 가이드라인

> 핵심 원칙:  
> **부족한 부분은 보완하고, 과한 부분은 완화하여 균형을 맞춘다**

---

## 🏗 1. 역삼각형 (V-Shape)  
#어깨강패 #운동선수

**목표:** 상체 볼륨 완화 + 하체 보완

- 상의: V넥, 셔츠 (시선 분산)
- 하의: 스트레이트 / 테이퍼드 핏

---

## 📏 2. 사각형 (Rectangle)  
#일자몸매 #슬림핏

**목표:** 어깨 확장 → 입체감 형성

- 상의: 어깨 패드 자켓, 스트라이프
- 하의: 과하지 않은 세미슬림 핏

---

## 🔺 3. 삼각형 (Triangle)  
#하체발달 #밸런스조정

**목표:** 시선 상향 유도

- 상의: 밝은 색, 어깨 강조 디자인
- 하의: 어두운 색, 와이드핏

---

## ⭕ 4. 타원형 (Oval)  
#슬림효과 #세로강조

**목표:** 세로 길이 강조

- 상의: 세로 스트라이프, 다크톤
- 하의: 일자 핏

---

## ⏳ 5. 모래시계형 (Hourglass)  
#균형잡힌 #클래식

**목표:** 기존 밸런스 유지

- 상의: 슬림핏 셔츠/니트
- 하의: 허리 라인 강조 치노/데님

---

# 🚀 최종 구조 요약

촬영 환경 표준화  
↓  
MediaPipe 관절 추출  
↓  
왜곡 제거 알고리즘 적용  
↓  
픽셀 → 실제 비율 변환  
↓  
비율 기반 체형 판정  
↓  
체형 맞춤 코디 추천  



